(function(b){b.sessionTimeout=function(g){function r(){m||(b.ajax({type:a.ajaxType,url:a.keepAliveUrl,data:a.ajaxData}),m=!0,setTimeout(function(){m=!1},a.keepAliveInterval))}function n(){clearTimeout(h);(a.countdownMessage||a.countdownBar)&&p("session",!0);if("function"===typeof a.onStart)a.onStart(a);a.keepAlive&&r();h=setTimeout(function(){if("function"!==typeof a.onWarn)b("#session-timeout-dialog").modal("show");else a.onWarn(a);t()},a.warnAfter)}function t(){clearTimeout(h);b("#session-timeout-dialog").hasClass("in")||
!a.countdownMessage&&!a.countdownBar||p("dialog",!0);h=setTimeout(function(){if("function"!==typeof a.onRedir)window.location=a.redirUrl;else a.onRedir(a)},a.redirAfter-a.warnAfter)}function p(d,f){clearTimeout(c.timer);"dialog"===d&&f?c.timeLeft=Math.floor((a.redirAfter-a.warnAfter)/1E3):"session"===d&&f&&(c.timeLeft=Math.floor(a.redirAfter/1E3));a.countdownBar&&"dialog"===d?c.percentLeft=Math.floor(c.timeLeft/((a.redirAfter-a.warnAfter)/1E3)*100):a.countdownBar&&"session"===d&&(c.percentLeft=Math.floor(c.timeLeft/
(a.redirAfter/1E3)*100));f=b(".countdown-holder");var q=0<=c.timeLeft?c.timeLeft:0;if(a.countdownSmart){var e=Math.floor(q/60);e=0<e?e+"m":"";0<e.length&&(e+=" ");f.text(e+(q%60+"s"))}else f.text(q+"s");a.countdownBar&&b(".countdown-bar").css("width",c.percentLeft+"%");--c.timeLeft;c.timer=setTimeout(function(){p(d)},1E3)}var k={title:"Your Session is About to Expire!",message:"Your session is about to expire.",logoutButton:"Logout",keepAliveButton:"Stay Connected",keepAliveUrl:"/keep-alive",ajaxType:"POST",
ajaxData:"",redirUrl:"/timed-out",logoutUrl:"/log-out",warnAfter:9E5,redirAfter:12E5,keepAliveInterval:5E3,keepAlive:!0,ignoreUserActivity:!1,onStart:!1,onWarn:!1,onRedir:!1,countdownMessage:!1,countdownBar:!1,countdownSmart:!1},a=k,h,c={};g&&(a=b.extend(k,g));if(a.warnAfter>=a.redirAfter)return console.error('Bootstrap-session-timeout plugin is miss-configured. Option "redirAfter" must be equal or greater than "warnAfter".'),!1;"function"!==typeof a.onWarn&&(g=a.countdownMessage?"\x3cp\x3e"+a.countdownMessage.replace(/{timer}/g,
'\x3cspan class\x3d"countdown-holder"\x3e\x3c/span\x3e')+"\x3c/p\x3e":"",k=a.countdownBar?'\x3cdiv class\x3d"progress"\x3e                   \x3cdiv class\x3d"progress-bar progress-bar-striped countdown-bar active" role\x3d"progressbar" style\x3d"min-width: 15px; width: 100%;"\x3e                     \x3cspan class\x3d"countdown-holder"\x3e\x3c/span\x3e                   \x3c/div\x3e                 \x3c/div\x3e':"",b("body").append('\x3cdiv class\x3d"modal fade" id\x3d"session-timeout-dialog"\x3e               \x3cdiv class\x3d"modal-dialog"\x3e                 \x3cdiv class\x3d"modal-content"\x3e                   \x3cdiv class\x3d"modal-header"\x3e                     \x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e                     \x3ch4 class\x3d"modal-title"\x3e'+
a.title+'\x3c/h4\x3e                   \x3c/div\x3e                   \x3cdiv class\x3d"modal-body"\x3e                     \x3cp\x3e'+a.message+"\x3c/p\x3e                     "+g+"                     "+k+'                   \x3c/div\x3e                   \x3cdiv class\x3d"modal-footer"\x3e                     \x3cbutton id\x3d"session-timeout-dialog-logout" type\x3d"button" class\x3d"btn btn-default"\x3e'+a.logoutButton+'\x3c/button\x3e                     \x3cbutton id\x3d"session-timeout-dialog-keepalive" type\x3d"button" class\x3d"btn btn-primary" data-dismiss\x3d"modal"\x3e'+
a.keepAliveButton+"\x3c/button\x3e                   \x3c/div\x3e                 \x3c/div\x3e               \x3c/div\x3e              \x3c/div\x3e"),b("#session-timeout-dialog-logout").on("click",function(){window.location=a.logoutUrl}),b("#session-timeout-dialog").on("hide.bs.modal",function(){n()}));if(!a.ignoreUserActivity){var l=[-1,-1];b(document).on("keyup mouseup mousemove touchend touchmove",function(d){if("mousemove"===d.type){if(d.clientX===l[0]&&d.clientY===l[1])return;l[0]=d.clientX;
l[1]=d.clientY}n();0<b("#session-timeout-dialog").length&&b("#session-timeout-dialog").data("bs.modal")&&b("#session-timeout-dialog").data("bs.modal").isShown&&(b("#session-timeout-dialog").modal("hide"),b("body").removeClass("modal-open"),b("div.modal-backdrop").remove())})}var m=!1;n()}})(jQuery);